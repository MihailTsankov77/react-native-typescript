{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport List from \"./Components/.newFolder/CustomComponents/CustomCardList\";\nimport Navbar from \"./Components/.newFolder/CustomComponents/CustomNavbar\";\nimport Btn from \"./Components/.newFolder/CustomComponents/CustomButton\";\nimport { ImageRepo } from \"./dao/repository\";\nimport AddImagesForm from \"./Components/AddImagesForm\";\nimport ImageCard from \"./Components/ImageCard\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar Views;\n\n(function (Views) {\n  Views[Views[\"HomePage\"] = 0] = \"HomePage\";\n  Views[Views[\"AddImages\"] = 1] = \"AddImages\";\n  Views[Views[\"FavoritesImages\"] = 2] = \"FavoritesImages\";\n})(Views || (Views = {}));\n\nvar App = function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      views: Views.HomePage,\n      isScrolled: false,\n      images: [],\n      edited: undefined\n    };\n\n    _this.handleCreateImage = function () {\n      var _ref = _asyncToGenerator(function* (image) {\n        if (_this.state.edited) {\n          _this.handleUpdate(image);\n        } else {\n          var newImage = yield ImageRepo.create(image);\n\n          _this.setState({\n            images: _this.state.images.concat(newImage)\n          });\n        }\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleDeleteImage = function () {\n      var _ref2 = _asyncToGenerator(function* (image) {\n        yield ImageRepo.delete(image.id);\n\n        _this.setState(function (_ref3) {\n          var images = _ref3.images;\n          return {\n            images: images.filter(function (img) {\n              return image.id !== img.id;\n            })\n          };\n        });\n      });\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleEdit = function (edited) {\n      _this.setState({\n        edited: edited,\n        views: Views.AddImages\n      });\n    };\n\n    _this.handleUpdate = function () {\n      var _ref4 = _asyncToGenerator(function* (image) {\n        var updated = yield ImageRepo.update(image);\n\n        _this.setState(function (_ref5) {\n          var images = _ref5.images;\n          return {\n            images: images.map(function (img) {\n              return img.id === updated.id ? updated : img;\n            }),\n            edited: undefined\n          };\n        });\n      });\n\n      return function (_x3) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    _this.handleFav = function (fav) {\n      fav.isFav = !fav.isFav;\n\n      _this.handleUpdate(fav);\n    };\n\n    _this.handleScroll = function (event) {\n      if (event.nativeEvent.contentOffset.y >= 200) {\n        _this.setState({\n          isScrolled: true\n        });\n      }\n\n      if (event.nativeEvent.contentOffset.y <= 50) {\n        _this.setState({\n          isScrolled: false\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(function* () {\n        var allImages = yield ImageRepo.findAll();\n        this.setState({\n          images: allImages\n        });\n      });\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"handleSwitchView\",\n    value: function handleSwitchView() {\n      switch (this.state.views) {\n        case Views.HomePage:\n          return _jsx(List, {\n            onDelete: this.handleDeleteImage,\n            onEdit: this.handleEdit,\n            options: {\n              this: this.handleFav\n            },\n            items: this.state.images.filter(function (img) {\n              return !img.isFav;\n            }),\n            Card: ImageCard\n          });\n\n        case Views.FavoritesImages:\n          return _jsx(List, {\n            onDelete: this.handleDeleteImage,\n            onEdit: this.handleEdit,\n            options: {\n              this: this.handleFav\n            },\n            items: this.state.images.filter(function (img) {\n              return img.isFav;\n            }),\n            Card: ImageCard\n          });\n\n        case Views.AddImages:\n          return _jsx(AddImagesForm, {\n            edited: this.state.edited,\n            onCreate: this.handleCreateImage\n          });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _jsxs(_Fragment, {\n        children: [_jsxs(Navbar, {\n          title: \"Gallery\",\n          stickyNav: this.state.isScrolled,\n          children: [_jsx(Btn, {\n            value: \"Images\",\n            event: function event() {\n              return _this2.setState({\n                views: Views.HomePage\n              });\n            },\n            bgColor: \"gray\"\n          }), _jsx(Btn, {\n            value: \"Favorites images\",\n            event: function event() {\n              return _this2.setState({\n                views: Views.FavoritesImages\n              });\n            },\n            bgColor: \"gray\"\n          }), _jsx(Btn, {\n            value: \"Add image\",\n            event: function event() {\n              return _this2.setState({\n                views: Views.AddImages\n              });\n            },\n            bgColor: \"gray\"\n          })]\n        }), _jsx(ScrollView, {\n          onScroll: this.handleScroll,\n          children: this.handleSwitchView()\n        })]\n      });\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"names":["React","Component","List","Navbar","Btn","ImageRepo","AddImagesForm","ImageCard","Views","App","state","views","HomePage","isScrolled","images","edited","undefined","handleCreateImage","image","handleUpdate","newImage","create","setState","concat","handleDeleteImage","delete","id","filter","img","handleEdit","AddImages","updated","update","map","handleFav","fav","isFav","handleScroll","event","nativeEvent","contentOffset","y","allImages","findAll","this","FavoritesImages","handleSwitchView"],"sources":["/Users/mihail.tsankov/Desktop/bootcamp/git/react-native-typescript/react-native/Gallery/App.tsx"],"sourcesContent":["import React, { Component, ComponentType } from \"react\";\nimport { ScrollView } from \"react-native\";\nimport List from \"./Components/.newFolder/CustomComponents/CustomCardList\";\nimport Navbar from \"./Components/.newFolder/CustomComponents/CustomNavbar\";\nimport Btn from \"./Components/.newFolder/CustomComponents/CustomButton\";\nimport WatchedCard from \"./Components/ImageCard\";\nimport { ImageRepo } from \"./dao/repository\";\nimport Image from \"./modules/Gallery-image\";\nimport AddImagesForm from \"./Components/AddImagesForm\";\nimport ImageCard from \"./Components/ImageCard\";\n\nenum Views {\n  HomePage,\n  AddImages,\n  FavoritesImages,\n}\n\ninterface AppState{\n  \n  views: Views;\n  isScrolled: boolean;\n  images: Image[];\n  edited: Image | undefined;\n}\n\nclass App extends Component<{},AppState> {\n\n  state: Readonly<AppState> ={\n  \n    views: Views.HomePage,\n    isScrolled: false,\n    images: [],\n    edited: undefined,\n  }\n \n\n  async componentDidMount() {\n    const allImages = await ImageRepo.findAll();\n\n    this.setState({images: allImages});\n  }\n\n  handleCreateImage = async (image: Image) =>{\n\n    if(this.state.edited){\n      this.handleUpdate(image)\n    }else{\n      const newImage = await ImageRepo.create(image);\n      this.setState({images: this.state.images.concat(newImage)});\n    }\n  }\n\n  handleDeleteImage = async (image: Image) =>{\n      await ImageRepo.delete(image.id!);\n      this.setState(({images}) => ({images: images.filter((img) => image.id!== img.id)}));\n  }\n\n  handleEdit = (edited: Image) => {\n    this.setState({edited: edited, views: Views.AddImages});\n  }\n\n  handleUpdate = async ( image: Image) => {\n    const updated = await ImageRepo.update(image);\n    this.setState(({images}) => ({images: images.map((img) => img.id === updated.id? updated: img), edited: undefined}));\n  }\n\n  handleFav = (fav: Image) => {\n    fav.isFav = !fav.isFav;\n    this.handleUpdate(fav);\n  }\n\n  handleScroll = (event: { nativeEvent: { contentOffset: { y: number; }; }; }) => {   \n    if(event.nativeEvent.contentOffset.y >= 200){\n      this.setState({isScrolled: true});\n    }\n    if(event.nativeEvent.contentOffset.y <= 50){\n      this.setState({isScrolled: false});\n    } \n}\n \n  handleSwitchView(){\n   \n    switch(this.state.views){\n      case Views.HomePage:\n        return <List<Image> onDelete={this.handleDeleteImage} onEdit={this.handleEdit} options={{ this: this.handleFav }} items={this.state.images.filter(img => !img.isFav)} Card={ImageCard as unknown as ComponentType<Image>}  />\n      case Views.FavoritesImages:\n        return <List<Image> onDelete={this.handleDeleteImage} onEdit={this.handleEdit} options={{ this: this.handleFav }} items={this.state.images.filter(img => img.isFav)} Card={ImageCard as unknown as ComponentType<Image>}  />\n      case Views.AddImages:\n        return <AddImagesForm edited={this.state.edited} onCreate={this.handleCreateImage}/>\n      \n    }\n  }\n  \n  render(): React.ReactNode {\n    return (\n      <>\n      <Navbar title=\"Gallery\" stickyNav={this.state.isScrolled}>\n          <Btn value=\"Images\" event={() => this.setState({views: Views.HomePage})} bgColor='gray'/>\n          <Btn value=\"Favorites images\" event={() => this.setState({views: Views.FavoritesImages})} bgColor='gray'/>\n          <Btn value=\"Add image\" event={() => this.setState({views: Views.AddImages})} bgColor='gray'/>\n      </Navbar>\n      <ScrollView onScroll={this.handleScroll}>\n        {this.handleSwitchView()}\n      </ScrollView>\n      </>\n    );\n  }\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}