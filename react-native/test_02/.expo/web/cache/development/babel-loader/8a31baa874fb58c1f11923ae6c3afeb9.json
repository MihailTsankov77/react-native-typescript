{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport Form from \"../CustomComponents/CustomForm\";\nimport Input from \"../CustomComponents/CustomFormInput\";\nimport Genre from \"../modules/genre\";\nimport { Validators } from \"../ts/validators\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar validators = {\n  name: [Validators.required(), Validators.len(3, 100)]\n};\n\nvar AddGenreForm = function (_Component) {\n  _inherits(AddGenreForm, _Component);\n\n  var _super = _createSuper(AddGenreForm);\n\n  function AddGenreForm() {\n    var _this$props$edited;\n\n    var _this;\n\n    _classCallCheck(this, AddGenreForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      formFields: {\n        name: ((_this$props$edited = _this.props.edited) == null ? void 0 : _this$props$edited.name) || \"\"\n      }\n    };\n\n    _this.handleFormChange = function (formState) {\n      _this.setState({\n        formFields: formState\n      });\n    };\n\n    _this.handleSubmitForm = function () {\n      var _this$props$edited2;\n\n      var genre = new Genre((_this$props$edited2 = _this.props.edited) == null ? void 0 : _this$props$edited2.id, _this.state.formFields.name);\n\n      _this.props.onCreate(genre);\n    };\n\n    return _this;\n  }\n\n  _createClass(AddGenreForm, [{\n    key: \"getSnapshotBeforeUpdate\",\n    value: function getSnapshotBeforeUpdate() {\n      return this.props;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.edited !== prevProps.edited) this.handleEdited();\n    }\n  }, {\n    key: \"handleEdited\",\n    value: function handleEdited() {\n      var _this2 = this;\n\n      if (!this.props.edited) return;\n      this.setState(function (_ref) {\n        var _this2$props$edited;\n\n        var formFields = _ref.formFields;\n        return {\n          formFields: _objectSpread(_objectSpread({}, formFields), {}, {\n            name: ((_this2$props$edited = _this2.props.edited) == null ? void 0 : _this2$props$edited.name) || \"\"\n          })\n        };\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _jsxs(Form, {\n        title: \"Add Genre\",\n        formState: this.state.formFields,\n        handleStateChange: this.handleFormChange,\n        handleSubmitForm: this.handleSubmitForm,\n        validators: validators,\n        children: [_jsx(Input, {\n          target: \"name\",\n          label: \"Name:\"\n        }), _jsx(_Fragment, {})]\n      });\n    }\n  }]);\n\n  return AddGenreForm;\n}(Component);\n\nexport default AddGenreForm;","map":{"version":3,"names":["React","Component","Form","Input","Genre","Validators","validators","name","required","len","AddGenreForm","state","formFields","props","edited","handleFormChange","formState","setState","handleSubmitForm","genre","id","onCreate","prevProps","handleEdited"],"sources":["/Users/mihail.tsankov/Desktop/bootcamp/workspace/Cheetsheet/Components/addGenreForm.tsx"],"sourcesContent":["import React , { Component } from \"react\";\nimport Form from \"../CustomComponents/CustomForm\";\nimport Input from \"../CustomComponents/CustomFormInput\";\nimport { validatorsType } from \"../CustomComponents/shared/shared-interfaces\";\nimport Genre from \"../modules/genre\";\nimport { Validators } from \"../ts/validators\";\n\ninterface AddGenreFormProps {\n    onCreate: (genre: Genre) =>void;\n    edited: Genre | undefined\n}\ninterface Fields{\n    name: string;\n}\n\ninterface AddGenreFormState {\n    formFields: Fields;\n}\n\nlet validators: validatorsType<Fields> = {\n    name: [Validators.required(), Validators.len(3, 100)],\n}\n \nclass AddGenreForm extends Component<AddGenreFormProps, AddGenreFormState> {\n    state: Readonly<AddGenreFormState> = {\n        formFields: {\n            name: this.props.edited?.name || \"\",\n        }\n    }\n    getSnapshotBeforeUpdate(){\n        return this.props;\n    }\n    componentDidUpdate(prevProps: AddGenreFormProps){\n        if(this.props.edited !== prevProps.edited)\n            this.handleEdited();\n    }\n\n    handleEdited(){\n        if(!this.props.edited) return;\n\n        this.setState(({formFields}) => ({formFields: {...formFields, name: this.props.edited?.name || \"\" }}))\n    }\n\n    handleFormChange = (formState: Fields) =>{\n        this.setState({formFields: formState});\n    }\n\n    handleSubmitForm = () =>{\n       \n        const genre = new Genre(\n            this.props.edited?.id,\n            this.state.formFields.name,\n        );\n        this.props.onCreate(genre);\n    }\n\n\n    render() { \n        \n        return (\n            \n            <Form<Fields> title=\"Add Genre\"\n            formState ={this.state.formFields}\n            handleStateChange={this.handleFormChange}\n            handleSubmitForm ={this.handleSubmitForm}\n            validators={validators}>\n                <Input target={\"name\"} label=\"Name:\"/>\n                <></>\n            </Form>\n         );\n    }\n}\n\nexport default AddGenreForm;"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAiBC,SAAjB,QAAkC,OAAlC;AACA,OAAOC,IAAP;AACA,OAAOC,KAAP;AAEA,OAAOC,KAAP;AACA,SAASC,UAAT;;;;AAcA,IAAIC,UAAkC,GAAG;EACrCC,IAAI,EAAE,CAACF,UAAU,CAACG,QAAX,EAAD,EAAwBH,UAAU,CAACI,GAAX,CAAe,CAAf,EAAkB,GAAlB,CAAxB;AAD+B,CAAzC;;IAIMC,Y;;;;;;;;;;;;;;;;;UACFC,K,GAAqC;MACjCC,UAAU,EAAE;QACRL,IAAI,EAAE,6BAAKM,KAAL,CAAWC,MAAX,wCAAmBP,IAAnB,KAA2B;MADzB;IADqB,C;;UAmBrCQ,gB,GAAmB,UAACC,SAAD,EAAsB;MACrC,MAAKC,QAAL,CAAc;QAACL,UAAU,EAAEI;MAAb,CAAd;IACH,C;;UAEDE,gB,GAAmB,YAAK;MAAA;;MAEpB,IAAMC,KAAK,GAAG,IAAIf,KAAJ,wBACV,MAAKS,KAAL,CAAWC,MADD,qBACV,oBAAmBM,EADT,EAEV,MAAKT,KAAL,CAAWC,UAAX,CAAsBL,IAFZ,CAAd;;MAIA,MAAKM,KAAL,CAAWQ,QAAX,CAAoBF,KAApB;IACH,C;;;;;;;WAzBD,mCAAyB;MACrB,OAAO,KAAKN,KAAZ;IACH;;;WACD,4BAAmBS,SAAnB,EAAgD;MAC5C,IAAG,KAAKT,KAAL,CAAWC,MAAX,KAAsBQ,SAAS,CAACR,MAAnC,EACI,KAAKS,YAAL;IACP;;;WAED,wBAAc;MAAA;;MACV,IAAG,CAAC,KAAKV,KAAL,CAAWC,MAAf,EAAuB;MAEvB,KAAKG,QAAL,CAAc;QAAA;;QAAA,IAAEL,UAAF,QAAEA,UAAF;QAAA,OAAmB;UAACA,UAAU,kCAAMA,UAAN;YAAkBL,IAAI,EAAE,8BAAI,CAACM,KAAL,CAAWC,MAAX,yCAAmBP,IAAnB,KAA2B;UAAnD;QAAX,CAAnB;MAAA,CAAd;IACH;;;WAgBD,kBAAS;MAEL,OAEI,MAAC,IAAD;QAAc,KAAK,EAAC,WAApB;QACA,SAAS,EAAG,KAAKI,KAAL,CAAWC,UADvB;QAEA,iBAAiB,EAAE,KAAKG,gBAFxB;QAGA,gBAAgB,EAAG,KAAKG,gBAHxB;QAIA,UAAU,EAAEZ,UAJZ;QAAA,WAKI,KAAC,KAAD;UAAO,MAAM,EAAE,MAAf;UAAuB,KAAK,EAAC;QAA7B,EALJ,EAMI,mBANJ;MAAA,EAFJ;IAWH;;;;EA/CsBL,S;;AAkD3B,eAAeS,YAAf"},"metadata":{},"sourceType":"module"}