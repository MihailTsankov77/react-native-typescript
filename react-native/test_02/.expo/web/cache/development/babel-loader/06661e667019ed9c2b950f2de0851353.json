{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar Draggable = function (_Component) {\n  _inherits(Draggable, _Component);\n\n  var _super = _createSuper(Draggable);\n\n  function Draggable() {\n    var _this;\n\n    _classCallCheck(this, Draggable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.panValue = new Animated.ValueXY({\n      x: 0,\n      y: 0\n    });\n    _this.opacity = new Animated.Value(1);\n    _this.panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: function onStartShouldSetPanResponder(e, gesture) {\n        return true;\n      },\n      onStartShouldSetPanResponderCapture: function onStartShouldSetPanResponderCapture(e, gesture) {\n        return false;\n      },\n      onMoveShouldSetPanResponderCapture: function onMoveShouldSetPanResponderCapture(e, gesture) {\n        return true;\n      },\n      onPanResponderMove: function onPanResponderMove(e, gestureState) {\n        _this.setState({\n          showDragArea: true\n        });\n\n        Animated.event([null, {\n          dx: _this.panValue.x,\n          dy: _this.panValue.y\n        }], {\n          useNativeDriver: false\n        })(e, gestureState);\n      },\n      onPanResponderRelease: function onPanResponderRelease(e, gesture) {\n        _this.props.dropAreas.forEach(function (dropArea) {\n          var px = dropArea.px,\n              py = dropArea.py,\n              width = dropArea.width,\n              height = dropArea.height;\n\n          if (gesture.y0 + gesture.dy < py + height && gesture.y0 + gesture.dy > py && gesture.x0 + gesture.dx < px + width && gesture.x0 + gesture.dx > px) {\n            Animated.sequence([Animated.parallel([Animated.timing(_this.panValue.y, {\n              toValue: height / 2 + py - gesture.y0,\n              duration: 400,\n              useNativeDriver: false\n            }), Animated.timing(_this.panValue.x, {\n              toValue: width / 2 + px - gesture.x0,\n              duration: 400,\n              useNativeDriver: false\n            })]), Animated.timing(_this.opacity, {\n              toValue: 0,\n              duration: 400,\n              useNativeDriver: false\n            })]).start();\n          } else {\n            Animated.spring(_this.panValue, {\n              toValue: {\n                x: 0,\n                y: 0\n              },\n              friction: 5,\n              useNativeDriver: false\n            }).start();\n          }\n        });\n      },\n      onPanResponderTerminate: function onPanResponderTerminate(e, gestureState) {\n        Animated.spring(_this.panValue, {\n          toValue: {\n            x: 0,\n            y: 0\n          },\n          friction: 7,\n          useNativeDriver: true\n        }).start();\n      }\n    });\n    return _this;\n  }\n\n  _createClass(Draggable, [{\n    key: \"render\",\n    value: function render() {\n      var panStyle = {\n        transform: this.panValue.getTranslateTransform(),\n        opacity: this.opacity\n      };\n      return _jsx(_Fragment, {\n        children: _jsx(Animated.View, _objectSpread(_objectSpread({}, this.panResponder.panHandlers), {}, {\n          style: _objectSpread(_objectSpread({}, panStyle), {}, {\n            zIndex: 100,\n            elevation: 100\n          }),\n          children: this.props.itemView\n        }))\n      });\n    }\n  }]);\n\n  return Draggable;\n}(Component);\n\nexport { Draggable as default };","map":{"version":3,"names":["React","Component","Draggable","panValue","Animated","ValueXY","x","y","opacity","Value","panResponder","PanResponder","create","onStartShouldSetPanResponder","e","gesture","onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponderCapture","onPanResponderMove","gestureState","setState","showDragArea","event","dx","dy","useNativeDriver","onPanResponderRelease","props","dropAreas","forEach","dropArea","px","py","width","height","y0","x0","sequence","parallel","timing","toValue","duration","start","spring","friction","onPanResponderTerminate","panStyle","transform","getTranslateTransform","panHandlers","zIndex","elevation","itemView"],"sources":["/Users/mihail.tsankov/Desktop/bootcamp/git/react-native-typescript/react-native/test_02/Components/Draggable.tsx"],"sourcesContent":["import React, { Component, ReactNode } from \"react\";\nimport {\n  PanResponder,\n  Animated,\n  GestureResponderEvent,\n  PanResponderGestureState,\n  View,\n} from \"react-native\";\n\nexport type position = {px: number, py: number, width: number, height: number};\ninterface DropAreaProps{\n  text?: string;\n  position: position;\n}\n\nexport interface DragAndDropProps{\n  onFinish?: () => void;\n  itemView: ReactNode;\n  dropAreas: position[];\n}\n\nexport default class Draggable extends Component<DragAndDropProps, {}> {\n  \n    panValue = new Animated.ValueXY({x: 0, y: 0})\n    opacity = new Animated.Value(1);\n\n  panResponder = PanResponder.create({\n    onStartShouldSetPanResponder: (e, gesture) => true,\n    onStartShouldSetPanResponderCapture: (e, gesture) => false,\n    onMoveShouldSetPanResponderCapture: (e, gesture) => true,\n    onPanResponderMove: (e: GestureResponderEvent, gestureState: PanResponderGestureState)=>{\n      this.setState({showDragArea: true});\n      Animated.event([\n          null, { dx: this.panValue.x, dy: this.panValue.y }\n        ], \n        {useNativeDriver: false})(e, gestureState);\n    },\n    onPanResponderRelease: (e, gesture) => {\n      \n      this.props.dropAreas.forEach(dropArea =>{\n        const {px, py, width, height} = dropArea;\n        if ((gesture.y0 + gesture.dy < py + height && gesture.y0 + gesture.dy > py) && (gesture.x0 + gesture.dx < px + width && gesture.x0 + gesture.dx > px)) {\n          Animated.sequence([\n              Animated.parallel([\n                Animated.timing(this.panValue.y, {\n                  toValue: (height/2 + py - gesture.y0),\n                  duration: 400,\n                  useNativeDriver: false\n                }),\n                Animated.timing(this.panValue.x, {\n                  toValue: (width/2 + px - gesture.x0),\n                  duration: 400,\n                  useNativeDriver: false\n                }),\n              ]),\n            Animated.timing(this.opacity, {\n              toValue: 0,\n              duration: 400,\n              useNativeDriver: false\n            })\n          ]).start();\n        } \n        else {\n            Animated.spring(this.panValue, {\n              toValue: { x: 0, y: 0 },\n              friction: 5,\n              useNativeDriver: false,\n            }).start();\n        }\n      });\n\n    },\n    onPanResponderTerminate: (e, gestureState) => {\n      Animated.spring(this.panValue, {\n        toValue: { x: 0, y: 0 },\n        friction: 7,\n        useNativeDriver: true,\n      }).start();\n    },\n  });\n\n  render() {\n    const panStyle = {\n      transform: this.panValue.getTranslateTransform(),\n      opacity: this.opacity,\n      \n    }\n    \n    return (\n        <>\n        <Animated.View  \n          {...this.panResponder.panHandlers}\n          style={{...panStyle, zIndex:100, elevation: 100}}\n        >\n        {this.props.itemView}\n        </Animated.View>\n        </>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}