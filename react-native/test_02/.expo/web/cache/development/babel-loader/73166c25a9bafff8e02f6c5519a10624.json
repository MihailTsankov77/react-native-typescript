{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { Component, useContext } from \"react\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { ContextDragAndDrop } from \"./DragAndDrop\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar Draggable = function Draggable(props) {\n  var context = useContext(ContextDragAndDrop);\n  return _jsx(DraggableElement, _objectSpread(_objectSpread({}, props), context));\n};\n\nvar DraggableElement = function (_Component) {\n  _inherits(DraggableElement, _Component);\n\n  var _super = _createSuper(DraggableElement);\n\n  function DraggableElement() {\n    var _this;\n\n    _classCallCheck(this, DraggableElement);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.panValue = new Animated.ValueXY({\n      x: 0,\n      y: 0\n    });\n    _this.opacity = new Animated.Value(1);\n    _this.panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: function onStartShouldSetPanResponder(e, gesture) {\n        return true;\n      },\n      onStartShouldSetPanResponderCapture: function onStartShouldSetPanResponderCapture(e, gesture) {\n        return true;\n      },\n      onMoveShouldSetPanResponderCapture: function onMoveShouldSetPanResponderCapture(e, gesture) {\n        return true;\n      },\n      onPanResponderMove: Animated.event([null, {\n        dx: _this.panValue.x,\n        dy: _this.panValue.y\n      }], {\n        useNativeDriver: true\n      }),\n      onPanResponderRelease: function onPanResponderRelease(e, gesture) {\n        var notIn = true;\n\n        var dropAreas = _this.props.dropAreas.filter(function (dr) {\n          return _this.props.dropAreasIDs.includes(dr.id);\n        });\n\n        var _loop = function _loop(dropArea) {\n          var px = dropArea.px,\n              py = dropArea.py,\n              width = dropArea.width,\n              height = dropArea.height;\n\n          if (gesture.y0 + gesture.dy < py + height && gesture.y0 + gesture.dy > py && gesture.x0 + gesture.dx < px + width && gesture.x0 + gesture.dx > px) {\n            Animated.sequence([Animated.parallel([Animated.timing(_this.panValue.y, {\n              toValue: height / 2 + py - gesture.y0,\n              duration: 400,\n              useNativeDriver: false\n            }), Animated.timing(_this.panValue.x, {\n              toValue: width / 2 + px - gesture.x0,\n              duration: 400,\n              useNativeDriver: false\n            })]), Animated.timing(_this.opacity, {\n              toValue: 0,\n              duration: 100,\n              useNativeDriver: true\n            })]).start(function () {\n              return dropArea.onDroptItem(_this.props.item, _this.props.itemRender);\n            });\n            notIn = false;\n            return \"break\";\n          }\n        };\n\n        for (var dropArea of dropAreas) {\n          var _ret = _loop(dropArea);\n\n          if (_ret === \"break\") break;\n        }\n\n        if (notIn) {\n          Animated.spring(_this.panValue, {\n            toValue: {\n              x: 0,\n              y: 0\n            },\n            friction: 5,\n            useNativeDriver: false\n          }).start();\n        }\n      },\n      onPanResponderTerminate: function onPanResponderTerminate(e, gestureState) {\n        Animated.spring(_this.panValue, {\n          toValue: {\n            x: 0,\n            y: 0\n          },\n          friction: 7,\n          useNativeDriver: true\n        }).start();\n      }\n    });\n    return _this;\n  }\n\n  _createClass(DraggableElement, [{\n    key: \"render\",\n    value: function render() {\n      var panStyle = {\n        transform: this.panValue.getTranslateTransform(),\n        opacity: this.opacity\n      };\n      return _jsx(Animated.View, _objectSpread(_objectSpread({}, this.panResponder.panHandlers), {}, {\n        style: [panStyle],\n        children: this.props.itemRender(this.props.item)\n      }));\n    }\n  }]);\n\n  return DraggableElement;\n}(Component);\n\nexport default Draggable;","map":{"version":3,"names":["React","Component","useContext","ContextDragAndDrop","Draggable","props","context","DraggableElement","panValue","Animated","ValueXY","x","y","opacity","Value","panResponder","PanResponder","create","onStartShouldSetPanResponder","e","gesture","onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponderCapture","onPanResponderMove","event","dx","dy","useNativeDriver","onPanResponderRelease","notIn","dropAreas","filter","dr","dropAreasIDs","includes","id","dropArea","px","py","width","height","y0","x0","sequence","parallel","timing","toValue","duration","start","onDroptItem","item","itemRender","spring","friction","onPanResponderTerminate","gestureState","panStyle","transform","getTranslateTransform","panHandlers"],"sources":["/Users/mihail.tsankov/Desktop/bootcamp/git/react-native-typescript/react-native/test_02/Components/.newFolder/CustomComponents/CustomElements/Draggable.tsx"],"sourcesContent":["import React, { Component, ReactNode, useContext } from \"react\";\nimport {\n  StyleSheet,\n  PanResponder,\n  Animated,\n  Button,\n} from \"react-native\";\nimport { ContextDragAndDrop, dropAreaConfig} from \"./DragAndDrop\";\n\nexport interface DragAndDropProps extends DragAndDropPropsFromApp{\n  dropAreas: dropAreaConfig[];\n}\nexport interface DragAndDropPropsFromApp{\n  item: any;\n  itemRender: (item: any)=> ReactNode;\n}\n\n\n\nconst  Draggable = (props: DragAndDropPropsFromApp) =>{\n  const context = useContext(ContextDragAndDrop);\n  return <DraggableElement {...props} {...context} />\n}\n\nclass DraggableElement extends Component<DragAndDropProps, {}> {\n  \n    panValue = new Animated.ValueXY({x: 0, y: 0 })\n    opacity = new Animated.Value(1);\n\n    panResponder = PanResponder.create({\n        onStartShouldSetPanResponder: (e, gesture) => true,\n        onStartShouldSetPanResponderCapture: (e, gesture) => true,\n        onMoveShouldSetPanResponderCapture: (e, gesture) => true,\n        onPanResponderMove: Animated.event([\n          null, { dx: this.panValue.x, dy: this.panValue.y }\n        ], {useNativeDriver: true}),\n        onPanResponderRelease: (e, gesture) => {\n          let notIn = true;\n          const dropAreas = this.props.dropAreas.filter(dr => this.props.dropAreasIDs.includes(dr.id));\n          for(const dropArea of dropAreas){\n            const {px, py, width, height} = dropArea;\n            if ((gesture.y0 + gesture.dy < py + height && gesture.y0 + gesture.dy > py) && (gesture.x0 + gesture.dx < px + width && gesture.x0 + gesture.dx > px)) {\n              Animated.sequence([\n                  Animated.parallel([\n                    Animated.timing(this.panValue.y, {\n                      toValue: (height/2 + py - gesture.y0),\n                      duration: 400,\n                      useNativeDriver: false,\n                    }),\n                    Animated.timing(this.panValue.x, {\n                      toValue: (width/2 + px - gesture.x0),\n                      duration: 400,\n                      useNativeDriver: false,\n                    }),\n                  ]),\n                Animated.timing(this.opacity, {\n                  toValue: 0,\n                  duration: 100,\n                  useNativeDriver: true\n                })\n              ]).start(()=> dropArea.onDroptItem(this.props.item , this.props.itemRender));\n              notIn=false;\n              break;\n            }\n          }\n          if(notIn){\n            Animated.spring(this.panValue, {\n              toValue: { x: 0, y: 0 },\n              friction: 5,\n              useNativeDriver: false,\n            }).start();\n          }\n        },\n        onPanResponderTerminate: (e, gestureState) => {\n          Animated.spring(this.panValue, {\n            toValue: { x: 0, y: 0 },\n            friction: 7,\n            useNativeDriver: true,\n          }).start();\n        },\n      });\n  render() {\n    const panStyle = {\n      transform: this.panValue.getTranslateTransform(),\n      opacity: this.opacity,\n    }\n    return (\n        <Animated.View\n          {...this.panResponder.panHandlers}\n          style={[panStyle]}\n        >\n        {this.props.itemRender(this.props.item)}\n        </Animated.View>\n    );\n  }\n}\n\n\n\nexport default Draggable;"],"mappings":"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"},"metadata":{},"sourceType":"module"}